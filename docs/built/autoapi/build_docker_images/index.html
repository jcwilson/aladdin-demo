

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>build_docker_images &mdash; FastAPI Prototype  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="bin.commands.docs" href="../bin/commands/docs/index.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> FastAPI Prototype
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../runbook.html">Runbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../code/index.html">Code</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../code/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Console commands</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.Undefined">Undefined</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.UNDEFINED">UNDEFINED</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.ConfigurationException">ConfigurationException</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.UserInfo">UserInfo</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.ComponentConfig">ComponentConfig</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.BuildInfo">BuildInfo</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.DockerIgnore">DockerIgnore</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.dockerignore">dockerignore</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.main">main</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.build">build</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.read_component_config">read_component_config</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.build_python_component_image">build_python_component_image</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.tag_base_image">tag_base_image</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.aladdinize_image">aladdinize_image</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.add_poetry">add_poetry</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.build_specialized_image">build_specialized_image</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.get_image_details">get_image_details</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.get_image_python_version">get_image_python_version</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.get_image_user_info">get_image_user_info</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.add_dependencies">add_dependencies</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.add_component">add_component</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.add_component_python_packages">add_component_python_packages</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.add_component_content">add_component_content</a></li>
</ul>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#build_docker_images.build_editor_image">build_editor_image</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FastAPI Prototype</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../code/index.html">Code</a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">build_docker_images</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/autoapi/build_docker_images/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="../bin/commands/docs/index.html" class="btn btn-neutral float-left" title="bin.commands.docs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-build_docker_images">
<span id="build-docker-images"></span><h1><a class="reference internal" href="#module-build_docker_images" title="build_docker_images"><code class="xref py py-mod docutils literal notranslate"><span class="pre">build_docker_images</span></code></a><a class="headerlink" href="#module-build_docker_images" title="Permalink to this headline">¶</a></h1>
<p><p>The aladdin build script indicated in this project’s lamp.json file.</p>
<p>It will run when <code class="docutils literal notranslate"><span class="pre">aladdin</span> <span class="pre">build</span></code> is invoked.</p>
</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="build_docker_images.Undefined">
<em class="property">class </em><code class="sig-name descname">Undefined</code><a class="reference internal" href="../../_modules/build_docker_images.html#Undefined"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.Undefined" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="build_docker_images.Undefined.__bool__">
<code class="sig-name descname">__bool__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#Undefined.__bool__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.Undefined.__bool__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.Undefined.__str__">
<em class="property">abstract </em><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#Undefined.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.Undefined.__str__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt id="build_docker_images.UNDEFINED">
<code class="sig-name descname">UNDEFINED</code><a class="reference internal" href="../../_modules/build_docker_images.html#UNDEFINED"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.UNDEFINED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt id="build_docker_images.ConfigurationException">
<em class="property">exception </em><code class="sig-name descname">ConfigurationException</code><a class="reference internal" href="../../_modules/build_docker_images.html#ConfigurationException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ConfigurationException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised if there is an error in the component.yaml.</p>
</dd></dl>

<dl class="py class">
<dt id="build_docker_images.UserInfo">
<em class="property">class </em><code class="sig-name descname">UserInfo</code><a class="reference internal" href="../../_modules/build_docker_images.html#UserInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.UserInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple()</span></code></p>
<dl class="py method">
<dt id="build_docker_images.UserInfo.__bool__">
<code class="sig-name descname">__bool__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#UserInfo.__bool__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.UserInfo.__bool__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.UserInfo.chown">
<em class="property">property </em><code class="sig-name descname">chown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#UserInfo.chown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.UserInfo.chown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="build_docker_images.ComponentConfig">
<em class="property">class </em><code class="sig-name descname">ComponentConfig</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>The representation of the component.yaml.</p>
<dl class="py method">
<dt id="build_docker_images.ComponentConfig.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">default</span><span class="p">:</span> <span class="n">typing.Any</span> <span class="o">=</span> <span class="default_value">UNDEFINED</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a lookup on the provided path name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The dot-delimited path to the config value.</p></li>
<li><p><strong>default</strong> – The value to return if the config value was not found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.version">
<em class="property">property </em><code class="sig-name descname">version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.language_name">
<em class="property">property </em><code class="sig-name descname">language_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.language_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.language_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.language_version">
<em class="property">property </em><code class="sig-name descname">language_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.language_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.language_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.image_base">
<em class="property">property </em><code class="sig-name descname">image_base</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.image_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.image_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.image_aladdinize">
<em class="property">property </em><code class="sig-name descname">image_aladdinize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.image_aladdinize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.image_aladdinize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.image_add_poetry">
<em class="property">property </em><code class="sig-name descname">image_add_poetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.image_add_poetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.image_add_poetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.image_user_info">
<em class="property">property </em><code class="sig-name descname">image_user_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.image_user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.image_user_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.ComponentConfig.dependencies">
<em class="property">property </em><code class="sig-name descname">dependencies</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#ComponentConfig.dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.ComponentConfig.dependencies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="build_docker_images.BuildInfo">
<em class="property">class </em><code class="sig-name descname">BuildInfo</code><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple()</span></code></p>
<p>A wrapper around the component config and some other high-level info to make parameterizing
the build process a bit simpler. The build functions should use this rather than directly
accessing the config.</p>
<dl class="py method">
<dt id="build_docker_images.BuildInfo.set_user_info">
<code class="sig-name descname">set_user_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">user_info</span><span class="p">:</span> <span class="n">UserInfo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.set_user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.set_user_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.set_language_version">
<code class="sig-name descname">set_language_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">version</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.set_language_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.set_language_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.language_name">
<em class="property">property </em><code class="sig-name descname">language_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.language_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.language_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.language_version">
<em class="property">property </em><code class="sig-name descname">language_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.language_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.language_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.tag">
<em class="property">property </em><code class="sig-name descname">tag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.editor_tag">
<em class="property">property </em><code class="sig-name descname">editor_tag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.editor_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.editor_tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.dev">
<em class="property">property </em><code class="sig-name descname">dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.dev" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.poetry_no_dev">
<em class="property">property </em><code class="sig-name descname">poetry_no_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.poetry_no_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.poetry_no_dev" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.python_optimize">
<em class="property">property </em><code class="sig-name descname">python_optimize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.python_optimize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.python_optimize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.base_image">
<em class="property">property </em><code class="sig-name descname">base_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.base_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.base_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.builder_image">
<em class="property">property </em><code class="sig-name descname">builder_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.builder_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.builder_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.aladdinize">
<em class="property">property </em><code class="sig-name descname">aladdinize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.aladdinize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.aladdinize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.add_poetry">
<em class="property">property </em><code class="sig-name descname">add_poetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.add_poetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.add_poetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.specialized_dockerfile">
<em class="property">property </em><code class="sig-name descname">specialized_dockerfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.specialized_dockerfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.specialized_dockerfile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.user_info">
<em class="property">property </em><code class="sig-name descname">user_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.user_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="build_docker_images.BuildInfo.dependencies">
<em class="property">property </em><code class="sig-name descname">dependencies</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#BuildInfo.dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.BuildInfo.dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the topologically sorted list of dependencies required for this component.</p>
<p>This will include the complete hierarchy of dependencies for this component, so it is only
necessary to enumerate a component’s direct dependencies in the component.yaml file.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="build_docker_images.DockerIgnore">
<em class="property">class </em><code class="sig-name descname">DockerIgnore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">typing.IO</span></em>, <em class="sig-param"><span class="n">original_file_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to be used to temporarily modify the singleton .dockerignore file for the various
build steps we undertake in the component building process. This is the core magic that allows
us to place all of our code under a single docker context but judiciously decide which parts to
send to each build step.</p>
<dl class="py method">
<dt id="build_docker_images.DockerIgnore.append_file">
<code class="sig-name descname">append_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file_path_to_append</span><span class="p">:</span> <span class="n">pathlib.Path</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.append_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.append_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Append the contents of a file to the .dockerignore file.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">prefix</span></code> is provided, any non-comment, non-empty lines will have the prefix applied as
they are appended to the .dockerignore file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path_to_append</strong> – The components/ directory-relative path to the file to append.</p></li>
<li><p><strong>prefix</strong> – The directory prefix to apply to all lines in the appended file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.DockerIgnore.ignore_all">
<code class="sig-name descname">ignore_all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.ignore_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.ignore_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a line that instructs docker to not send anything in the context.</p>
<p>It is expected that this is followed by calls to <code class="docutils literal notranslate"><span class="pre">include()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.DockerIgnore.ignore_defaults">
<code class="sig-name descname">ignore_defaults</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.ignore_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.ignore_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the contents of the original .DockerIgnore file into the temporary one.</p>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.DockerIgnore.ignore">
<code class="sig-name descname">ignore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">entry</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.ignore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.ignore" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicitly ignore <code class="docutils literal notranslate"><span class="pre">entry</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entry</strong> – The pattern to ignore.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.DockerIgnore.include">
<code class="sig-name descname">include</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">entry</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.include"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.include" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicitly include <code class="docutils literal notranslate"><span class="pre">entry</span></code> after a previous <code class="docutils literal notranslate"><span class="pre">ignore_all()</span></code> call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entry</strong> – The pattern to include.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="build_docker_images.DockerIgnore.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">entry</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#DockerIgnore.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.DockerIgnore.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the entry line with a new-line to the ignore file and then flush the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entry</strong> – The pattern to write.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="build_docker_images.dockerignore">
<code class="sig-name descname">dockerignore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#dockerignore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.dockerignore" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator to allow the decorated function to manipulate the .dockerignore file for a build.</p>
<p>It provides the ignore_file argument to the decorated function with the DockerIgnore instance
wrapping the already opened file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – The file mode string to use to open the .dockerignore file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The decorated function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.main">
<code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Kick off the build process with data gathered from the system and environment.</p>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.build">
<code class="sig-name descname">build</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lamp</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">hash</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">components</span><span class="p">:</span> <span class="n">typing.List</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default_python_version</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'3.8'</span></em>, <em class="sig-param"><span class="n">poetry_version</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'1.0.5'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build each component for the project.</p>
<p>If components is empty, this will assume each directory in the components/ directory is a
component and will build each of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lamp</strong> – The data from the project’s lamp.json file.</p></li>
<li><p><strong>hash</strong> – The build hash provided by <code class="docutils literal notranslate"><span class="pre">aladdin</span> <span class="pre">build</span></code>.</p></li>
<li><p><strong>components</strong> – The list of components to build, defaults to all of them.</p></li>
<li><p><strong>default_python_version</strong> – The python version to use for the base image if not provided in
the component’s <code class="docutils literal notranslate"><span class="pre">component.yaml</span></code> file, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;3.8&quot;</span></code>.</p></li>
<li><p><strong>poetry_version</strong> – The version of poetry to install in the component images, defaults to
<code class="docutils literal notranslate"><span class="pre">&quot;1.0.5&quot;</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.read_component_config">
<code class="sig-name descname">read_component_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">component</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; ComponentConfig<a class="reference internal" href="../../_modules/build_docker_images.html#read_component_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.read_component_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the component’s <code class="docutils literal notranslate"><span class="pre">component.yaml</span></code> file into a <code class="docutils literal notranslate"><span class="pre">ComponentConfig</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>component</strong> – The component’s config to read.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The config data for the component. If the component does not provide a
<code class="docutils literal notranslate"><span class="pre">component.yaml</span></code> file, this returns an empty config.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.build_python_component_image">
<code class="sig-name descname">build_python_component_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#build_python_component_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.build_python_component_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the component.</p>
<p>This builds the component image according to the <code class="docutils literal notranslate"><span class="pre">component.yaml</span></code> configuration. It begins by
building or tagging a base image and then adding to it things like the poetry tool and any
component dependency assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.tag_base_image">
<code class="sig-name descname">tag_base_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#tag_base_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.tag_base_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Tag the starting point image.</p>
<p>Most components will build off of the default image (hopefully always somewhat close to the
latest python release).</p>
<p>If one does not wish to use the default image, provide another in the <code class="docutils literal notranslate"><span class="pre">image.base</span></code> field of
the <code class="docutils literal notranslate"><span class="pre">component.yaml</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.aladdinize_image">
<code class="sig-name descname">aladdinize_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#aladdinize_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.aladdinize_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the aladdin boilerplate.</p>
<p>This creates the aladdin-user user and sets the <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code> to <code class="docutils literal notranslate"><span class="pre">/code</span></code>.</p>
<p>If one does not wish to add the aladdin boilerplate, specify <code class="docutils literal notranslate"><span class="pre">image.aladdinize</span></code> as <code class="docutils literal notranslate"><span class="pre">false</span></code>
in the <code class="docutils literal notranslate"><span class="pre">component.yaml</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.add_poetry">
<code class="sig-name descname">add_poetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#add_poetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.add_poetry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the poetry package manager to the image.</p>
<p>This allows one to use the image to create/modify the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> and <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code>
files for a component.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.build_specialized_image">
<code class="sig-name descname">build_specialized_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#build_specialized_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.build_specialized_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the component’s <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> to the image.</p>
<p>This allows one to further customize the (possibly aladdinized) base image with more specific
Dockerfile instructions. The context provided to the Dockerfile is the full <code class="docutils literal notranslate"><span class="pre">components/</span></code>
directory, minus the .dockerignore items, of course.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.get_image_details">
<code class="sig-name descname">get_image_details</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#get_image_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.get_image_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract python version and the user, group and home directory of the image’s <code class="docutils literal notranslate"><span class="pre">USER</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The python version string and the user info from the current image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.get_image_python_version">
<code class="sig-name descname">get_image_python_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../../_modules/build_docker_images.html#get_image_python_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.get_image_python_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the image’s python version either from the component.yaml config or the image itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The python version string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.get_image_user_info">
<code class="sig-name descname">get_image_user_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span> &#x2192; UserInfo<a class="reference internal" href="../../_modules/build_docker_images.html#get_image_user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.get_image_user_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the image’s user info either from the component.yaml config or the image itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The user info.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.add_dependencies">
<code class="sig-name descname">add_dependencies</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#add_dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.add_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Add all of the components’ dependencies to the image.</p>
<p>This will iterate recursively over all of the dependencies found in the component’s
component.yaml and copy in the dependencies’ poetry-managed libraries as well as the
dependencies’ code itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.add_component">
<code class="sig-name descname">add_component</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">component</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#add_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.add_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a component’s poetry-managed libraries and the component’s own assets to the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>component</strong> – The component to add to the image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.add_component_python_packages">
<code class="sig-name descname">add_component_python_packages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">component</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#add_component_python_packages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.add_component_python_packages" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the poetry-managed python packages from the specified component to the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>component</strong> – The component’s python packages to add to the image.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.add_component_content">
<code class="sig-name descname">add_component_content</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">component</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">poetry_install_component</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#add_component_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.add_component_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy in the component’s code and other data.</p>
<p>This will populate the component’s directory in the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>component</strong> – The component’s content to add to the image.</p></li>
<li><p><strong>poetry_install_component</strong> – Whether or not to do one final <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span></code> for this
component. When this is enabled, this will install any poetry
scripts defined by the component into the ~/.local/bin
directory, thus making them available for unqualified CLI
invocation.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="build_docker_images.build_editor_image">
<code class="sig-name descname">build_editor_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">build_info</span><span class="p">:</span> <span class="n">BuildInfo</span></em>, <em class="sig-param"><span class="n">ignore_file</span><span class="p">:</span> <span class="n">DockerIgnore</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/build_docker_images.html#build_editor_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#build_docker_images.build_editor_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a companion image to the final built image that removes the ENTRYPOINT and CMD settings.</p>
<p>This image can be used for shelling into for debugging and/or running arbitrary commands in a
mirror of the built image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_info</strong> – The build info populated from the config and command line arguments.</p></li>
<li><p><strong>ignore_file</strong> – The <code class="docutils literal notranslate"><span class="pre">.dockerignore</span></code> file handle to be used to update its contents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../bin/commands/docs/index.html" class="btn btn-neutral float-left" title="bin.commands.docs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Josh Wilson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>